<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003" DefaultTargets="Validation">
    <PropertyGroup>
        <InputPath></InputPath>
        <OutputPath></OutputPath>
        <Configuration></Configuration>
        <EntryPointFilePath>$(InputPath)/MSBuildSampleForGitHubActions/MSBuildSampleForGitHubActions.csproj</EntryPointFilePath>
        <ProductVersion>0.0.0</ProductVersion>
        <BuildVersion>0</BuildVersion>
    </PropertyGroup>

    <Target Name="Validation">
        <Error Condition="'$(InputPath)' == ''" Text="`InputPath` is empty."/>
        <Error Condition="'$(OutputPath)' == ''" Text="`OutputPath` is empty."/>
        <Error Condition="'$(Configuration)' == ''" Text="`Configuration` is empty."/>
        <Error Condition="'$(Configuration)' != 'Debug' And '$(Configuration)' != 'Release'" Text="`Configuration` is invalid: $(Configuration)."/>
    </Target>

    <Target Name="Construction" AfterTargets="Validation">
        <MSBuild Targets="restore" Projects="$(EntryPointFilePath)" />
        
        <MSBuild Projects="$(EntryPointFilePath)"
            Properties="GenerateDocumentationFile=true;
                        OutputPath=$(OutputPath);
                        Configuration=$(Configuration);
                        Version=$(ProductVersion);
                        AssemblyVersion=$(ProductVersion).$(BuildVersion)"
        />
    </Target>
</Project>
